{{ $paginator := .Paginator }}

<!-- Number of links either side of the current page. -->
{{ $adjacent_links := 2 }}

<!-- $max_links = ($adjacent_links * 2) + 1 -->
{{ $max_links := (add (mul $adjacent_links 2) 1) }}

<!-- $lower_limit = $adjacent_links + 1 -->
{{ $lower_limit := (add $adjacent_links 1) }}

<!-- $upper_limit = $paginator.TotalPages - $adjacent_links -->
{{ $upper_limit := (sub $paginator.TotalPages $adjacent_links) }}

<!-- If there's more than one page. -->
{{ if gt $paginator.TotalPages 1 }}
<div class="my-6">


    <div class="flex justify-between text-xl font-semibold text-primary mx-auto">

        <div class="flex flex-shrink-0 items-center justify-start w-1/4">

            <!-- First page. -->
            {{ if ne $paginator.PageNumber 1 }}
            <a href="{{ $paginator.First.URL }}" class="p-2 focus-primary" title="{{ i18n "goto_first_page" }}">
                {{ partial "icon" (dict "name" "angle-double-left" "size" "4" ) }}
            </a>
            {{ end }}

            <!-- Previous page. -->
            {{ if $paginator.HasPrev }}
            <a href="{{ $paginator.Prev.URL }}" class="p-2 focus-primary" title="{{ i18n "goto_previous_page" }}">
                {{ partial "icon" (dict "name" "angle-left" "size" "4") }}
            </a>
            {{ end }}

        </div>


        <div class="flex flex-grow justify-center items-center">
    <!-- Page numbers. -->
    {{ range $paginator.Pagers }}

      {{ $.Scratch.Set "page_number_flag" false }}


      <!-- Advanced page numbers. -->
      {{ if gt $paginator.TotalPages $max_links }}


        <!-- Lower limit pages. -->
        <!-- If the user is on a page which is in the lower limit.  -->
        {{ if le $paginator.PageNumber $lower_limit }}

          <!-- If the current loop page is less than max_links. -->
          {{ if le .PageNumber $max_links }}
            {{ $.Scratch.Set "page_number_flag" true }}
          {{ end }}


        <!-- Upper limit pages. -->
        <!-- If the user is on a page which is in the upper limit. -->
        {{ else if ge $paginator.PageNumber $upper_limit }}

          <!-- If the current loop page is greater than total pages minus $max_links -->
          {{ if gt .PageNumber (sub $paginator.TotalPages $max_links) }}
            {{ $.Scratch.Set "page_number_flag" true }}
          {{ end }}


        <!-- Middle pages. -->
        {{ else }}

          {{ if and ( ge .PageNumber (sub $paginator.PageNumber $adjacent_links) ) ( le .PageNumber (add $paginator.PageNumber $adjacent_links) ) }}
            {{ $.Scratch.Set "page_number_flag" true }}
          {{ end }}

        {{ end }}


      <!-- Simple page numbers. -->
      {{ else }}

        {{ $.Scratch.Set "page_number_flag" true }}

      {{ end }}

      <!-- Output page numbers. -->
      {{ if eq ($.Scratch.Get "page_number_flag") true }}
        {{ if eq . $paginator }}
        <div class="text-3xl font-bold focus-primary p-2">
            {{ .PageNumber }}
        </div>
        {{ else }}
        <a href="{{ .URL }}" class="focus-primary p-2" title="{{ print (i18n "goto_page") " " .PageNumber }}">
            {{ .PageNumber }}
        </a>
        {{ end }}
      {{ end }}

    {{ end }}
    </div>

    <div class="flex flex-shrink-0 items-center justify-end w-1/4">

        <!-- Next page. -->
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="p-2 focus-primary" title="{{ i18n "goto_next_page" }}">
            {{ partial "icon" (dict "name" "angle-right" "size" "4" "alt" (i18n "goto_next_page") ) }}
        </a>
        {{ end }}

        <!-- Last page. -->
        {{ if ne $paginator.PageNumber $paginator.TotalPages }}
        <a href="{{ $paginator.Last.URL }}" class="p-2 focus-primary" title="{{ i18n "goto_last_page" }}">
            {{ partial "icon" (dict "name" "angle-double-right" "size" "4" "alt" (i18n "goto_last_page") ) }}
        </a>
        {{ end }}

    </div>

  </div>
</div>
{{ end }}
