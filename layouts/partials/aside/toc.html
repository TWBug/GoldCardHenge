{{/* if ne .TableOfContents "<nav id=\"TableOfContents\"></nav>" */}}
{{ $elements := strings.Count "<li>" .TableOfContents }}
{{ if gt $elements 1 }}
<aside>
    <div class="my-12 overflow-y-auto" x-data="taToc()" x-init="init({length: {{ len (.TableOfContents | plainify) }}, threshold: 400 })" data-length="{{ len (.TableOfContents | plainify) }}" data-elements="{{ strings.Count "<li>" .TableOfContents }}">
        <div class="flex items-center justify-between border-b-2 border-secondary border-dashed pl-2">
            <h3 class="flex items-center">
                {{ partial "icon" (dict "name" "stream" "size" "5") }}
                <span class="text-lg font-bold ml-2">
                    {{ i18n "table_of_contents" }}            
                </span>
            </h3>
            <button type="button" class="flex-center text-primary p-1 m-1 focus-primary" @click.prevent="toggle()" x-cloak>
                <span x-show="folded">
                    {{ partial "icon" (dict "name" "angle-up" "size" "6") }}
                </span>
                <span x-show="!folded">
                    {{ partial "icon" (dict "name" "angle-down" "size" "6") }}
                </span>
            </button>
        </div>
        <div class="tableofcontents pt-4 px-1"
            x-show="folded"
            x-transition:enter="transition transform ease-out duration-200"
            x-transition:enter-start="opacity-0 -translate-y-5"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition transform ease-in duration-100"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0 -translate-y-5"
        >
            {{ .TableOfContents }}
        </div>
    </div>
</aside>
{{ end }}